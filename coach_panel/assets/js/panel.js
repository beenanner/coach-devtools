"use strict";function Console(){}function outputResults(e){Console.log(e);var t=document.getElementsByClassName("js-results")[0],n=document.getElementsByClassName("js-score")[0];t.innerHTML="",n.innerHTML="";var o=document.createDocumentFragment(),a=document.createDocumentFragment(),d=document.createDocumentFragment(),c=document.createTextNode("Score: "+e.advice.score+"/100");d.appendChild(c),n.appendChild(d),colourScore(n,e.advice.score),delete e.advice.score;var s=Object.keys(e.advice).sort();s.forEach(function(t){var n,d,c;if(e.advice[t].adviceList)n=document.createElement("h2"),n.appendChild(document.createTextNode(t+" ("+e.advice[t].score+"/100)")),colourScore(n,e.advice[t].score),n.classList.add("js-toggle","toggle"),o.appendChild(n),c=document.createElement("div"),c.classList.add("advice-section"),c.style.display="none",d=Object.keys(e.advice[t].adviceList).sort(),d.forEach(function(n){var o=e.advice[t].adviceList[n],a=document.createElement("h3");a.appendChild(document.createTextNode(o.title+" ("+o.score+"/100)")),colourScore(a,o.score),a.classList.add("js-toggle","toggle"),c.appendChild(a);var d=document.createElement("div");d.classList.add("advice-section","advice-sub-section"),d.style.display="none";var s=document.createElement("p");s.appendChild(document.createTextNode(o.advice)),d.appendChild(s);var i=document.createElement("p");if(i.classList.add("description"),i.appendChild(document.createTextNode(o.description)),d.appendChild(i),o.offending.length>0){var r=document.createElement("h4");r.appendChild(document.createTextNode("Offending Areas")),d.appendChild(r);var l=document.createElement("pre"),u=o.offending.join("\n");l.appendChild(document.createTextNode(u)),d.appendChild(l)}c.appendChild(d)}),o.appendChild(c);else{if(n=document.createElement("h2"),n.appendChild(document.createTextNode(t.toString())),n.classList.add("js-toggle","toggle"),a.appendChild(n),c=document.createElement("div"),c.classList.add("advice-section"),c.style.display="none","object"===_typeof(e.advice[t])){var s=document.createElement("pre");d=Object.keys(e.advice[t]).sort();var i=[];d.forEach(function(n){var o=e.advice[t][n];"object"===("undefined"==typeof o?"undefined":_typeof(o))?(d=Object.keys(e.advice[t][n]).sort(),d.forEach(function(o){var a=e.advice[t][n][o];Array.isArray(a)&&a.length>0?i.push(o+": "+a.join("\n")+"\n"):i.push(o+": "+a+"\n")})):i.push(n+": "+o+"\n")});var r=i.join("\n");s.appendChild(document.createTextNode(r)),c.appendChild(s)}else{var l=e.advice[t],u=document.createElement("h3");u.appendChild(document.createTextNode(t+": "+l)),c.appendChild(u)}a.appendChild(c)}}),o.appendChild(a),t.appendChild(o),unicornify();for(var i=document.getElementsByClassName("js-toggle"),r=0;r<i.length;r++)i[r].addEventListener("click",function(e){var t=closest(e.target,"js-toggle");t.classList.toggle("is-visible"),t.classList.contains("is-visible")?t.nextElementSibling.style.display="":t.nextElementSibling.style.display="none"},!0)}function colourScore(e,t){100===t?e.classList.add("is-amazing","is-unicorn"):t>75?e.classList.add("is-good"):t>50?e.classList.add("is-ok"):e.classList.add("is-bad")}function unicornify(){function e(t){t.forEach(function(e){var t=+e.getAttribute("style").split(",")[0].split("(")[1]-o%360;e.setAttribute("style","color:hsla("+t+", 100%, 50%, 1)")}),n=window.requestAnimationFrame(function(){e(t)})}function t(){window.cancelAnimationFrame(n)}for(var n,o=4,a=document.getElementsByClassName("is-unicorn"),d=0;d<a.length;d++){for(var c=a[d],s=c.innerHTML,i=s.length,r=360/i,l="",u=0;i>u;u++)l+="<span style='color:hsla("+u*r+", 100%, 50%, 1)'>"+s.charAt(u)+"</span>";c.innerHTML=l,c.addEventListener("mouseover",function(t){var n=t.target.parentNode.querySelectorAll("span");e(n)},!1),c.addEventListener("mouseout",function(e){t()},!1)}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Console.Type={LOG:"log",DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error",GROUP:"group",GROUP_COLLAPSED:"groupCollapsed",GROUP_END:"groupEnd"},Console.addMessage=function(e,t,n){chrome.runtime.sendMessage({command:"sendToConsole",tabId:chrome.devtools.tabId,args:escape(JSON.stringify(Array.prototype.slice.call(arguments,0)))})},function(){for(var e=Object.getOwnPropertyNames(Console.Type),t=0;t<e.length;++t){var n=Console.Type[e[t]];Console[n]=Console.addMessage.bind(Console,n)}}(),document.getElementsByClassName("js-analyse")[0].addEventListener("click",function(e){chrome.runtime.sendMessage({command:"init",tabId:chrome.devtools.tabId},function(t){e.target.innerText="Re-Analyse",outputResults(t)})},!1);var closest=function(e,t){for(;!e.classList.contains(t);)if(e=e.parentNode,!e)return null;return e};