"use strict";function Console(){}function outputResults(e){Console.log(e);var t=document.createDocumentFragment(),n=document.createDocumentFragment();delete e.advice.score;var o=Object.keys(e.advice).sort();o.forEach(function(o){var a,s,d;if(e.advice[o].adviceList)a=document.createElement("h2"),a.appendChild(document.createTextNode(o+" ("+e.advice[o].score+"/100)")),colourScore(a,e.advice[o].score),a.classList.add("js-toggle","toggle"),t.appendChild(a),d=document.createElement("div"),d.classList.add("advice-section"),d.style.display="none",s=Object.keys(e.advice[o].adviceList).sort(),s.forEach(function(t){var n=e.advice[o].adviceList[t],a=document.createElement("h3");a.appendChild(document.createTextNode(n.title+" ("+n.score+"/100)")),colourScore(a,n.score),a.classList.add("js-toggle","toggle"),d.appendChild(a);var s=document.createElement("div");s.classList.add("advice-section","advice-sub-section"),s.style.display="none";var c=document.createElement("p");c.appendChild(document.createTextNode(n.advice)),s.appendChild(c);var i=document.createElement("p");if(i.appendChild(document.createTextNode(n.description)),s.appendChild(i),n.offending.length>0){var l=document.createElement("h4");l.appendChild(document.createTextNode("Offending Areas")),s.appendChild(l);var r=document.createElement("pre"),u=n.offending.join("\n");r.appendChild(document.createTextNode(u)),s.appendChild(r)}d.appendChild(s)}),t.appendChild(d);else{if(a=document.createElement("h2"),a.appendChild(document.createTextNode(o.toString())),a.classList.add("js-toggle","toggle"),n.appendChild(a),d=document.createElement("div"),d.classList.add("advice-section"),d.style.display="none","object"===_typeof(e.advice[o])){var c=document.createElement("pre");s=Object.keys(e.advice[o]).sort();var i=[];s.forEach(function(t){var n=e.advice[o][t];i.push(t+": "+n+"\n")});var l=i.join("\n");c.appendChild(document.createTextNode(l)),d.appendChild(c)}else{var r=e.advice[o],u=document.createElement("h3");u.appendChild(document.createTextNode(o+": "+r)),d.appendChild(u)}n.appendChild(d)}}),t.appendChild(n),$results.appendChild(t);for(var a=document.getElementsByClassName("js-toggle"),s=0;s<a.length;s++)a[s].addEventListener("click",function(e){var t=e.target;e.target.classList.contains("js-toggle")&&(t.classList.toggle("is-visible"),t.classList.contains("is-visible")?t.nextElementSibling.style.display="":t.nextElementSibling.style.display="none")},!1)}function colourScore(e,t){100===t?e.classList.add("is-amazing","is-unicorn"):t>75?e.classList.add("is-good"):t>50?e.classList.add("is-ok"):e.classList.add("is-bad")}function unicornify(){function e(e){n=setInterval(function(){e.forEach(function(e){var t=+e.getAttribute("style").split(",")[0].split("(")[1]-o%360;e.setAttribute("style","color:hsla("+t+", 100%, 50%, 1)")})},a)}function t(){clearInterval(n)}for(var n,o=4,a=10,s=document.getElementsByClassName("is-unicorn"),d=0;d<s.length;d++){for(var c=s[d],i=c.innerHTML,l=i.length,r=360/l,u="",p=0;l>p;p++)u+="<span style='color:hsla("+p*r+", 100%, 50%, 1)'>"+i.charAt(p)+"</span>";c.innerHTML=u,c.addEventListener("mouseover",function(t){var n=t.target.parentNode.querySelectorAll("span");e(n)},!1),c.addEventListener("mouseout",function(e){t()},!1)}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Console.Type={LOG:"log",DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error",GROUP:"group",GROUP_COLLAPSED:"groupCollapsed",GROUP_END:"groupEnd"},Console.addMessage=function(e,t,n){chrome.runtime.sendMessage({command:"sendToConsole",tabId:chrome.devtools.tabId,args:escape(JSON.stringify(Array.prototype.slice.call(arguments,0)))})},function(){for(var e=Object.getOwnPropertyNames(Console.Type),t=0;t<e.length;++t){var n=Console.Type[e[t]];Console[n]=Console.addMessage.bind(Console,n)}}();var $results=document.getElementsByClassName("js-results")[0],$score=document.getElementsByClassName(".js-score")[0];document.getElementsByClassName("js-analyse")[0].addEventListener("click",function(e){chrome.runtime.sendMessage({command:"init",tabId:chrome.devtools.tabId},function(t){e.target.innerText="Re-Analyse",$results.innerHTML="",outputResults(t)})},!1);